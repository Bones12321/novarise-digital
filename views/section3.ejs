<%- include('partials/header', { title: title, cart }) %>

<style>
  body {
    font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    margin: 0;
    padding: 0;
    background: url('/images/wellness-bg.jpg') no-repeat center center fixed;
    background-size: cover;
    color: #333;
  }

  .description {
    text-align: center;
    max-width: 700px;
    margin: 40px auto;
    font-size: 1.1rem;
    color: #fff;
    font-weight: bold;
    text-shadow: 0 2px 6px rgba(0,0,0,0.7);
  }

  h1 {
    text-align: center;
    margin-top: 40px;
    font-size: 2.5rem;
    color: #fff;
    font-weight: 900;
    text-shadow: 0 2px 8px rgba(0,0,0,0.8);
  }

  .products-container {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    padding: 20px;
    max-width: 1200px;
    margin: 0 auto 80px auto;
  }

  .product-box {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(12px);
    border-radius: 12px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    transition: transform 0.3s ease, box-shadow 0.3s ease;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
    text-align: center;
    color: #222;
  }

  .product-box:hover {
    transform: scale(1.03);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.3);
  }

  .product-box img {
    width: 100%;
    height: 180px;
    object-fit: cover;
    border-radius: 8px;
    margin-bottom: 15px;
  }

  .product-box h2 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: #111;
  }

  .product-box p {
    font-size: 1rem;
    margin-bottom: 15px;
    color: #333;
  }

  .product-box button {
    width: 100%;
    padding: 10px 0;
    font-size: 1rem;
    border: none;
    border-radius: 25px;
    background-color: #222;
    color: white;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  .product-box button:hover {
    background-color: #444;
  }

  .quote {
    text-align: center;
    margin: 40px auto;
    font-size: 1.5rem;
    font-style: italic;
    color: #fff;
    font-weight: bold;
    text-shadow: 0 2px 6px rgba(0,0,0,0.7);
  }
</style>

<main>
  <h1><%= title %></h1>

  <p class="description">
    Fuel your body with evidence-based digital tools designed for peak performance and long-term wellness. Our Physical Health collection includes fitness systems, meal protocols, and recovery strategies developed by real experts. Get actionable insights without the fluff, directly from certified trainers and health specialists. Whether you're chasing endurance, strength, or vitality — this is your digital gym. Your next level starts with your physical foundation.
  </p>

  <div class="products-container">
    <% products.forEach(product => { %>
      <div class="product-box">
        <% if (product.image) { %>
          <img src="<%= product.image %>" alt="<%= product.title %>" />
        <% } else { %>
          <div style="height:180px; display:flex; align-items:center; justify-content:center; background:#ccc; border-radius:8px; margin-bottom:15px; color:#777;">
            Image Coming Soon
          </div>
        <% } %>
        <h2><%= product.title %></h2>
        <p>$<%= product.price.toFixed(2) %></p>

        <button class="add-to-cart-btn" 
          data-id="<%= product.title.replace(/\s+/g, '-').toLowerCase() %>" 
          data-name="<%= product.title %>" 
          data-price="<%= product.price %>">
          Add to Basket
        </button>
      </div>
    <% }) %>
  </div>

  <p class="quote">
    "Strong body, sharp mind, unstoppable momentum." – NovaRise
  </p>
</main>

<!-- Footer -->
<footer class="site-footer">
  <div class="footer-top">
    <div class="footer-logo-container">
      <img src="/images/logo.png" alt="Beyond 9 to 5 Logo" class="footer-logo" />
      <p class="footer-tagline">
        Beyond 9 to 5<br />
        Empowering the night builders, dream chasers, and side hustlers to create something extraordinary beyond the ordinary.
      </p>
    </div>

    <nav class="footer-navigation">
      <h4>Navigate</h4>
      <ul>
        <li><a href="/">Home</a></li>
        <li><a href="/about">About</a></li>
        <li><a href="/resources">Resources</a></li>
        <li><a href="/community">Community</a></li>
        <li><a href="/blog">Blog</a></li>
        <li><a href="/support">Support</a></li>
        <li><a href="/contact">Contact</a></li>
        <li><a href="/faq">FAQ</a></li>
        <li><a href="/shop">Shop</a></li>
        <li><a href="/privacy-policy">Privacy</a></li>
        <li><a href="/terms-of-service">Terms of Service</a></li>
      </ul>
    </nav>

    <div class="footer-cta">
      <h4>Join the Movement</h4>
      <p>Ready to build something extraordinary?</p>
      <a href="/get-started" class="btn btn-primary">Get Started</a>
    </div>
  </div>

  <div class="footer-bottom">
    <p>© <%= new Date().getFullYear() %> Beyond 9 to 5. All rights reserved. Built for the night builders and dream chasers.</p>
    <div class="footer-bottom-links">
      <span>Always building</span>
      <a href="/privacy-policy">Privacy</a>
      <a href="/terms-of-service">Terms</a>
    </div>
  </div>
</footer>

<!-- Scripts -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

<script>
  document.querySelectorAll('.add-to-cart-btn').forEach(button => {
    button.addEventListener('click', async () => {
      const id = button.dataset.id;
      const name = button.dataset.name;
      const price = button.dataset.price;

      try {
        const response = await fetch('/cart/add', {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({ id, name, price, quantity: 1 }),
        });

        if (response.ok) {
          const data = await response.json();

          const badge = document.querySelector('nav .badge');
          if (badge) {
            badge.textContent = data.cartCount;
            badge.style.display = data.cartCount > 0 ? 'inline-block' : 'none';
          }

          alert(`Added "${name}" to basket!`);
        } else {
          alert('Failed to add to basket. Please try again.');
        }
      } catch (error) {
        console.error('Error adding to cart:', error);
        alert('An error occurred. Please try again later.');
      }
    });
  });
</script>
