<%- include('partials/header', { title: 'Contact Us' }) %>

<style>
  .contact-container {
    max-width: 600px;
    margin: 40px auto;
    padding: 0 20px;
    color: white;
  }
  form {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  label {
    font-weight: 600;
    color: white;
  }
  input, textarea {
    padding: 10px;
    font-size: 1rem;
    border-radius: 6px;
    border: 1px solid #ccc;
    background-color: #222;
    color: white;
  }
  input::placeholder,
  textarea::placeholder {
    color: #aaa;
  }
  input:focus, textarea:focus {
    outline: none;
    border-color: #007BFF;
    background-color: #333;
  }
  button {
    padding: 12px;
    font-size: 1.1rem;
    background-color: #007BFF;
    color: white;
    border: none;
    border-radius: 8px;
    cursor: pointer;
  }
  button:hover {
    background-color: #0056b3;
  }
  .error {
    color: #ff6b6b;
    font-size: 0.9rem;
  }
  .success-message {
    color: #90ee90;
    font-weight: bold;
    margin-top: 15px;
  }
</style>

<main class="contact-container <%= pageClass %>">
  <h1>Contact Us</h1>
  <p>Have questions or want to get in touch? Fill out the form below and we'll get back to you as soon as possible.</p>

  <form id="contactForm" method="POST" action="/contact">
    <label for="name">Your Name *</label>
    <input 
      type="text" 
      id="name" 
      name="name" 
      required 
      placeholder="John Doe" 
      value="<%= typeof name !== 'undefined' ? name : '' %>" 
    />

    <label for="email">Email Address *</label>
    <input 
      type="email" 
      id="email" 
      name="email" 
      required 
      placeholder="you@example.com" 
      value="<%= typeof email !== 'undefined' ? email : '' %>" 
    />

    <label for="topic">Topic *</label>
    <input 
      type="text" 
      id="topic" 
      name="topic" 
      required 
      placeholder="Enter the topic" 
      value="<%= typeof topic !== 'undefined' ? topic : '' %>" 
    />

    <label for="message">Message *</label>
    <textarea 
      id="message" 
      name="message" 
      rows="6" 
      required 
      placeholder="Write your message here..."
    ><%= typeof message !== 'undefined' ? message : '' %></textarea>

    <button type="submit">Send Message</button>
  </form>

  <% if (typeof successMessage !== 'undefined') { %>
    <p class="success-message"><%= successMessage %></p>
  <% } %>

  <% if (typeof errorMessage !== 'undefined') { %>
    <p class="error"><%= errorMessage %></p>
  <% } %>
</main>

<%- include('partials/footer') %>

<script>
  document.getElementById('contactForm').addEventListener('submit', function(event) {
    const emailInput = document.getElementById('email').value.trim();
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

    if (!emailRegex.test(emailInput)) {
      event.preventDefault();
      alert('Please enter a valid email address.');
    }
  });
</script>
